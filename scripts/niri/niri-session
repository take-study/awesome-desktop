#!/usr/bin/env bash

# Niri session startup script
# This script sets up the environment and starts niri

# Cursor settings
export XCURSOR_SIZE=24
export XCURSOR_THEME="{{gtk_cursor_theme}}"

# Qt settings
export QT_QPA_PLATFORMTHEME=qt5ct
export QT_QPA_PLATFORM=wayland;xcb
export QT_WAYLAND_DISABLE_WINDOWDECORATION=1
export QT_AUTO_SCREEN_SCALE_FACTOR=1
export QT_SCALE_FACTOR=1

# GTK settings
export GDK_BACKEND=wayland,x11

# Fcitx5 Input Method Configuration
export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx

# XDG settings
export XDG_CURRENT_DESKTOP=niri
export XDG_SESSION_TYPE=wayland
export XDG_SESSION_DESKTOP=niri

# Wayland specific settings
export WAYLAND_DISPLAY=wayland-1
export MOZ_ENABLE_WAYLAND=1
export MOZILLA_DISABLE_WAYLAND=0

# Portal settings
export GTK_USE_PORTAL=1
export QT_USE_PORTAL=1

# Start niri
exec niri
